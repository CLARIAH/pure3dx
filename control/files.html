<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>control.files API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML" integrity="sha256-kZafAc6mZvK3W3v1pHOcUix30OHQN6pU/NO2oFkqZVw=" crossorigin></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>control.files</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L1-L755" class="git-link">Browse git</a>
</summary>
<pre><code class="python">import os
import yaml
import json
import re
from shutil import rmtree, copytree, copy

from control.generic import deepAttrDict


THREE_EXT = {&#34;glb&#34;, &#34;gltf&#34;}
THREE_EXT_PAT = &#34;|&#34;.join(THREE_EXT)

IMAGE_RE = re.compile(r&#34;&#34;&#34;^.*\.(png|jpg|jpeg)$&#34;&#34;&#34;, re.I)
THREED_RE = re.compile(rf&#34;&#34;&#34;^.*\.({THREE_EXT_PAT})$&#34;&#34;&#34;, re.I)

DS_STORE = &#34;.DS_Store&#34;


def str_presenter(dumper, data):
    &#34;&#34;&#34;configures yaml for dumping multiline strings
    Ref: https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data
    &#34;&#34;&#34;
    if data.count(&#34;\n&#34;) &gt; 0:  # check for multiline string
        return dumper.represent_scalar(&#34;tag:yaml.org,2002:str&#34;, data, style=&#34;|&#34;)

    return dumper.represent_scalar(&#34;tag:yaml.org,2002:str&#34;, data)


yaml.add_representer(str, str_presenter)
yaml.representer.SafeRepresenter.add_representer(str, str_presenter)


def normpath(path):
    if path is None:
        return None
    norm = os.path.normpath(path)
    return &#34;/&#34;.join(norm.split(os.path.sep))


_tildeDir = normpath(os.path.expanduser(&#34;~&#34;))
_homeDir = _tildeDir


scanDir = os.scandir
walkDir = os.walk
splitExt = os.path.splitext
mTime = os.path.getmtime


def abspath(path):
    return normpath(os.path.abspath(path))


def expanduser(path):
    nPath = normpath(path)
    if nPath.startswith(&#34;~&#34;):
        return f&#34;{_homeDir}{nPath[1:]}&#34;

    return nPath


def unexpanduser(path):
    nPath = normpath(path)

    return nPath.replace(_homeDir, &#34;~&#34;)


def prefixSlash(path):
    &#34;&#34;&#34;Prefix a / before a path if it is non-empty and not already starts with it.&#34;&#34;&#34;
    return f&#34;/{path}&#34; if path and not path.startswith(&#34;/&#34;) else path


def dirEmpty(target):
    target = normpath(target)
    return not os.path.exists(target) or not os.listdir(target)


def clearTree(path):
    &#34;&#34;&#34;Remove all files from a directory, recursively, but leave subdirectories.

    Reason: we want to inspect output in an editor.
    But if we remove the directories, the editor looses its current directory
    all the time.

    Parameters
    ----------
    path:
        The directory in question. A leading `~` will be expanded to the user&#39;s
        home directory.
    &#34;&#34;&#34;

    subdirs = []
    path = expanduser(path)

    with os.scandir(path) as dh:
        for i, entry in enumerate(dh):
            name = entry.name
            if name.startswith(&#34;.&#34;):
                continue
            if entry.is_file():
                os.remove(f&#34;{path}/{name}&#34;)
            elif entry.is_dir():
                subdirs.append(name)

    for subdir in subdirs:
        clearTree(f&#34;{path}/{subdir}&#34;)


def initTree(path, fresh=False, gentle=False):
    &#34;&#34;&#34;Make sure a directory exists, optionally clean it.

    Parameters
    ----------
    path:
        The directory in question. A leading `~` will be expanded to the user&#39;s
        home directory.

        If the directory does not exist, it will be created.

    fresh: boolean, optional False
        If True, existing contents will be removed, more or less gently.

    gentle: boolean, optional False
        When existing content is removed, only files are recursively removed, not
        subdirectories.
    &#34;&#34;&#34;

    path = expanduser(path)
    exists = os.path.exists(path)
    if fresh:
        if exists:
            if gentle:
                clearTree(path)
            else:
                rmtree(path)

    if not exists or fresh:
        os.makedirs(path, exist_ok=True)


def dirNm(path, up=1):
    &#34;&#34;&#34;Get the directory part of a file name.

    Parameters
    ----------
    up: int, optional 1
        The number of levels to go up. Should be 1 or higher.
        If not passed, the parent directory is returned.
        If it is 0 or lower, the `path` itself is returned.
    &#34;&#34;&#34;
    return path if up &lt; 1 else os.path.dirname(dirNm(path, up - 1))


def fileNm(path):
    &#34;&#34;&#34;Get the file part of a file name.&#34;&#34;&#34;
    return os.path.basename(path)


def stripExt(path):
    &#34;&#34;&#34;Strip the extension of a file name, if there is one.&#34;&#34;&#34;
    (d, f) = (dirNm(path), fileNm(path))
    sep = &#34;/&#34; if d else &#34;&#34;
    return f&#34;{d}{sep}{f.rsplit(&#39;.&#39;, 1)[0]}&#34;


def splitPath(path):
    &#34;&#34;&#34;Split a file name in a directory part and a file part.&#34;&#34;&#34;
    return os.path.split(path)


def isFile(path):
    &#34;&#34;&#34;Whether path exists and is a file.&#34;&#34;&#34;
    return os.path.isfile(path)


def isDir(path):
    &#34;&#34;&#34;Whether path exists and is a directory.&#34;&#34;&#34;
    return os.path.isdir(path)


def fileExists(path):
    &#34;&#34;&#34;Whether a path exists as file on the file system.&#34;&#34;&#34;
    return os.path.isfile(path)


def fileRemove(path):
    &#34;&#34;&#34;Removes a file if it exists as file.&#34;&#34;&#34;
    if fileExists(path):
        os.remove(path)


def fileCopy(pathSrc, pathDst):
    &#34;&#34;&#34;Copies a file if it exists as file.

    Wipes the destination file, if it exists.
    &#34;&#34;&#34;
    if fileExists(pathSrc):
        fileRemove(pathDst)
        copy(pathSrc, pathDst)


def fileMove(pathSrc, pathDst):
    &#34;&#34;&#34;Moves a file if it exists as file.

    Wipes the destination file, if it exists.
    &#34;&#34;&#34;
    if fileExists(pathSrc):
        fileRemove(pathDst)
    os.rename(pathSrc, pathDst)


def dirExists(path):
    &#34;&#34;&#34;Whether a path exists as directory on the file system.&#34;&#34;&#34;
    return (
        False
        if path is None
        else True
        if path == &#34;&#34;
        else os.path.isdir(path)
        if path
        else True
    )


def dirRemove(path):
    &#34;&#34;&#34;Removes a directory if it exists as directory.&#34;&#34;&#34;
    if dirExists(path):
        rmtree(path)


def dirMove(pathSrc, pathDst):
    &#34;&#34;&#34;Moves a directory if it exists as directory.

    Refuses the operation in the target exists.
    &#34;&#34;&#34;
    if not dirExists(pathSrc) or dirExists(pathDst):
        return False
    os.rename(pathSrc, pathDst)
    return True


def dirCopy(pathSrc, pathDst, noclobber=False):
    &#34;&#34;&#34;Copies a directory if it exists as directory.

    Wipes the destination directory, if it exists.
    &#34;&#34;&#34;
    if dirExists(pathSrc):
        if dirExists(pathDst):
            if noclobber:
                return False
        dirRemove(pathDst)
        copytree(pathSrc, pathDst)
        return True
    else:
        return False


def dirUpdate(pathSrc, pathDst, force=False, delete=True, level=-1, conservative=False):
    &#34;&#34;&#34;Makes a destination dir equal to a source dir by copying newer files only.

    Files of the source dir that are missing or older in the destination dir are
    copied from the source to the destination.
    Files and directories in the destination dir that do not exist in the source
    dir are deleted, but this can be prevented.

    Parameters
    ----------
    pathSrc: string
        The source directory. It does not matter whether the directory ends with
        a slash or not, unless the directory is the root.
    pathDst: string
        The destination directory. It does not matter whether the directory ends with
        a slash or not, unless the directory is the root.
    force: boolean, optional False
        If True, files that are older in the source than in the destination will also
        be copied.
    delete: boolean, optional False
        Whether to delete items from the destination that do not exist in the source.
    level: integer, optional -1
        Whether to merge recursively and to what level. At level 0 we do not merge,
        but copy each item from source to destination.

        If we start with a negative level, we never reach level 0, so we apply merging
        always.

        If we start with level 0, we merge the files, but we copy the subdirectories.

        If we start with a positive level, we merge that many levels deep, after which
        we switch to copying.
    conservative: boolean, optional False
        If we are at level 0 and in the situation that we should copy a directory,
        we assume that if there is already a corresponding directory at the destination,
        it has the right contents, so we do not do the copying.
        For example, if we are copying versioned directories of software, we assume
        that directories with the same version names are the same

    Returns
    -------
    tuple
        *   boolean: whether the action was successful;
        *   integer: the amount of copy actions to destination directory
        *   integer: the amount of delete actions in the destination directory

    &#34;&#34;&#34;

    if not dirExists(pathSrc):
        return (False, 0, 0)

    srcPath = pathSrc.rstrip(&#34;/&#34;)
    dstPath = pathDst.rstrip(&#34;/&#34;)

    if not dirExists(pathDst):
        if fileExists(pathDst):
            if not delete:
                return (False, 0, 0)

            fileRemove(pathDst)

        return (dirCopy(pathSrc, pathDst), 1, 0)

    (good, cActions, dActions) = (True, 0, 0)
    (srcFiles, srcDrs) = dirContents(pathSrc, asSet=True)
    (dstFiles, dstDirs) = dirContents(pathDst, asSet=True)

    level -= 1

    for file in srcFiles:
        if file == DS_STORE:
            continue

        src = f&#34;{srcPath}/{file}&#34;
        dst = f&#34;{dstPath}/{file}&#34;

        if file in dstDirs:
            if delete:
                dirRemove(dst)
                dActions += 1
            else:
                good = False
                continue

        if file not in dstFiles or force or mTime(src) &gt; mTime(dst):
            fileCopy(src, dst)
            cActions += 1

    for file in dstFiles:
        dst = f&#34;{dstPath}/{file}&#34;

        if file == DS_STORE:
            fileRemove(dst)
            continue

        src = f&#34;{srcPath}/{file}&#34;

        if delete and file not in srcFiles:
            fileRemove(dst)
            dActions += 1

    # if level == 0:
    #   return (good, cActions, dActions)

    for dr in srcDrs:
        src = f&#34;{srcPath}/{dr}&#34;
        dst = f&#34;{dstPath}/{dr}&#34;

        if dr in dstFiles:
            if delete:
                fileRemove(dst)
                dActions += 1
            else:
                good = False
                continue

        if level == 0:
            if not (conservative and dirExists(dst)):
                dirCopy(src, dst)
                cActions += 1

            thisGood = True
        else:
            (thisGood, thisC, thisD) = dirUpdate(
                src,
                dst,
                force=force,
                delete=delete,
                level=level,
                conservative=conservative,
            )
            cActions += thisC
            dActions += thisD

        if not thisGood:
            good = False

    for dr in dstDirs:
        src = f&#34;{srcPath}/{dr}&#34;
        dst = f&#34;{dstPath}/{dr}&#34;

        if delete and dr not in srcDrs:
            dirRemove(dst)
            dActions += 1

    return (good, cActions, dActions)


def dirMake(path):
    &#34;&#34;&#34;Creates a directory if it does not already exist as directory.&#34;&#34;&#34;
    if not dirExists(path):
        os.makedirs(path, exist_ok=True)


def dirContents(path, asSet=False):
    &#34;&#34;&#34;Gets the contents of a directory.

    Only the direct entries in the directory (not recursively), and only real files
    and folders.

    The list of files and folders will be returned separately.
    There is no attempt to sort the files.

    Parameters
    ----------
    path: string
        The path to the directory on the file system.
    asSet: boolean, optional False
        If True, the files and directories will be delivered as sets, otherwise
        as tuples.

    Returns
    -------
    tuple of tuple
        The files and the subdirectories.
        These are given as names relative to the directory `path`,
        so `path` is not prepended to these names.
    &#34;&#34;&#34;
    if not dirExists(path):
        return (set(), set()) if asSet else ((), ())

    files = []
    dirs = []

    for entry in os.listdir(path):
        if os.path.isfile(f&#34;{path}/{entry}&#34;):
            files.append(entry)
        elif os.path.isdir(f&#34;{path}/{entry}&#34;):
            dirs.append(entry)

    return (set(files), set(dirs)) if asSet else (tuple(files), tuple(dirs))


def dirAllFiles(path, ignore=None):
    &#34;&#34;&#34;Gets all the files found by `path`.

    The result is just `[path]` if `path` is a file, otherwise the list of files under
    `path`, recursively.

    The files are sorted alphabetically by path name.

    Parameters
    ----------
    path: string
        The path to the file or directory on the file system.
    ignore: set
        Names of directories that must be skipped

    Returns
    -------
    tuple of string
        The names of the files under `path`, starting with `path`, followed
        by the bit relative to `path`.
    &#34;&#34;&#34;
    if fileExists(path):
        return [path]

    if not dirExists(path):
        return []

    files = []

    if not ignore:
        ignore = set()

    for entry in os.listdir(path):
        name = f&#34;{path}/{entry}&#34;

        if os.path.isfile(name):
            files.append(name)
        elif os.path.isdir(name):
            if entry in ignore:
                continue
            files.extend(dirAllFiles(name, ignore=ignore))

    return tuple(sorted(files))


def getCwd():
    &#34;&#34;&#34;Get current directory.

    Returns
    -------
    string
        The current directory.
    &#34;&#34;&#34;
    return os.getcwd()


def chDir(directory):
    &#34;&#34;&#34;Change to other directory.

    Parameters
    ----------
    directory: string
        The directory to change to.
    &#34;&#34;&#34;
    return os.chdir(directory)


def readPath(filePath):
    &#34;&#34;&#34;Reads the (textual) contents of a file.

    !!! note &#34;Not for binary files&#34;
        The file will not be opened in binary mode.
        Use this only for files with textual content.

    Parameters
    ----------
    filePath: string
        The path of the file on the file system.

    Returns
    -------
    string
        The contents of the file as unicode.
        If the file does not exist, the empty string is returned.
    &#34;&#34;&#34;

    if os.path.isfile(filePath):
        with open(filePath) as fh:
            text = fh.read()
        return text
    return &#34;&#34;


def readJson(text=None, plain=False, asFile=None, preferTuples=False):
    if asFile is None:
        cfg = json.loads(text)
    else:
        if fileExists(asFile):
            with open(asFile, encoding=&#34;utf8&#34;) as fh:
                cfg = json.load(fh)
        else:
            cfg = {}

    return cfg if plain else deepAttrDict(cfg, preferTuples=preferTuples)


def writeJson(data, asFile=None):
    if asFile is None:
        return json.dumps(data, ensure_ascii=False)

    with open(asFile, &#34;w&#34;, encoding=&#34;utf8&#34;) as fh:
        json.dump(data, fh, ensure_ascii=False)


def readYaml(
    text=None,
    asFile=None,
    plain=False,
    preferTuples=True,
    defaultEmpty=True,
    ignore=False,
):
    &#34;&#34;&#34;Reads a yaml file.

    Parameters
    ----------
    text: string, optional None
        The input text, should be valid YAML, but see `ignore`.
        If not given, the text is read from the file whose path is
        given in `asFile`
    asFile: string, optional None
        The path of the file on the file system from which the YAML is read.
        If not given, `text` is used. See also `ignore`.
    plain: boolean, optional False
        If True, the result is (recursively) converted to an AttrDict
    preferTuples: optional True
        When converting to an AttrDict, values of type lists are replaced by
        tuples.
        Has only effect if `plain` is False.
    defaultEmpty: boolean, False
        If True, when the yaml text is None or the file named by `asFile` does
        not exist, it returns an empty dict or AttrDict.
        If False, `None` is returned in such cases.
    ignore: boolean, False
        If the text is not valid YAML, do not raise an exception, but
        return the text itself.

    Returns
    -------
    AttrDict | void | string
        The data content of the yaml file if it exists.
    &#34;&#34;&#34;
    if asFile is None:
        yamlText = text
    else:
        if fileExists(asFile):
            with open(asFile, encoding=&#34;utf8&#34;) as fh:
                yamlText = fh.read()
        else:
            yamlText = None

    if yamlText is None:
        cfg = {} if defaultEmpty else None
    else:
        try:
            cfg = yaml.load(yamlText, Loader=yaml.FullLoader)
        except Exception as e:
            if ignore:
                cfg = text
            else:
                cfg = None
                raise e

    return (
        cfg
        if plain
        else None
        if cfg is None
        else deepAttrDict(cfg, preferTuples=preferTuples)
    )


def writeYaml(data, asFile=None):
    if asFile is None:
        return yaml.dump(data, allow_unicode=True)

    with open(asFile, &#34;w&#34;, encoding=&#34;utf8&#34;) as fh:
        yaml.dump(data, fh, allow_unicode=True, line_break=None)


def extNm(path):
    &#34;&#34;&#34;Get the extension part of a file name.

    The dot is not included.
    If there is no extension, the empty string is returned.
    &#34;&#34;&#34;
    parts = fileNm(path).rsplit(&#34;.&#34;, 1)
    return &#34;&#34; if len(parts) == 0 else parts[-1]


def listDirs(path):
    &#34;&#34;&#34;The list of all subdirectories in a directory.

    If the directory does not exist, the empty list is returned.
    &#34;&#34;&#34;
    if not dirExists(path):
        return []

    subdirs = []

    with os.scandir(path) as dh:
        for entry in dh:
            if entry.is_dir():
                name = entry.name
                subdirs.append(name)

    return subdirs


def listFiles(path, ext):
    &#34;&#34;&#34;The list of all files in a directory with a certain extension.

    If the directory does not exist, the empty list is returned.
    &#34;&#34;&#34;
    if not dirExists(path):
        return []

    files = []

    nExt = len(ext)
    with os.scandir(path) as dh:
        for entry in dh:
            name = entry.name
            if name.endswith(ext) and entry.is_file():
                files.append(name[0:-nExt])

    return files


def listFilesAccepted(path, accept, withExt=True):
    &#34;&#34;&#34;The list of all files in a directory that match a certain accepted header.

    If the directory does not exist, the empty list is returned.
    &#34;&#34;&#34;
    if not dirExists(path):
        return []

    files = []

    exts = [ext.strip() for ext in accept.split(&#34;,&#34;)]

    with os.scandir(path) as dh:
        for entry in dh:
            name = entry.name
            for ext in exts:
                nExt = len(ext)
                if name.endswith(ext) and entry.is_file():
                    fileName = name if withExt else name[0:-nExt]
                    files.append(fileName)

    return files


def listImages(path):
    &#34;&#34;&#34;The list of all image files in a directory.

    If the directory does not exist, the empty list is returned.

    An image is a file with extension .png, .jpg, .jpeg or any of its
    case variants.
    &#34;&#34;&#34;
    if not dirExists(path):
        return []

    files = []

    with os.scandir(path) as dh:
        for entry in dh:
            name = entry.name
            if IMAGE_RE.match(name) and entry.is_file():
                files.append(name)

    return files


def list3d(path):
    &#34;&#34;&#34;The list of all 3D files in a directory.

    If the directory does not exist, the empty list is returned.

    An image is a file with extension .gltf, .glb or any of its
    case variants.
    &#34;&#34;&#34;
    if not dirExists(path):
        return []

    files = []

    with os.scandir(path) as dh:
        for entry in dh:
            name = entry.name
            if THREED_RE.match(name) and entry.is_file():
                files.append(name)

    return files</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="control.files.abspath"><code class="name flex">
<span>def <span class="ident">abspath</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L50-L51" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def abspath(path):
    return normpath(os.path.abspath(path))</code></pre>
</details>
</dd>
<dt id="control.files.chDir"><code class="name flex">
<span>def <span class="ident">chDir</span></span>(<span>directory)</span>
</code></dt>
<dd>
<div class="desc"><p>Change to other directory.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>directory</code></strong> :&ensp;<code>string</code></dt>
<dd>The directory to change to.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L507-L515" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def chDir(directory):
    &#34;&#34;&#34;Change to other directory.

    Parameters
    ----------
    directory: string
        The directory to change to.
    &#34;&#34;&#34;
    return os.chdir(directory)</code></pre>
</details>
</dd>
<dt id="control.files.clearTree"><code class="name flex">
<span>def <span class="ident">clearTree</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"><p>Remove all files from a directory, recursively, but leave subdirectories.</p>
<p>Reason: we want to inspect output in an editor.
But if we remove the directories, the editor looses its current directory
all the time.</p>
<h2 id="parameters">Parameters</h2>
<p>path:
The directory in question. A leading <code>~</code> will be expanded to the user's
home directory.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L78-L106" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def clearTree(path):
    &#34;&#34;&#34;Remove all files from a directory, recursively, but leave subdirectories.

    Reason: we want to inspect output in an editor.
    But if we remove the directories, the editor looses its current directory
    all the time.

    Parameters
    ----------
    path:
        The directory in question. A leading `~` will be expanded to the user&#39;s
        home directory.
    &#34;&#34;&#34;

    subdirs = []
    path = expanduser(path)

    with os.scandir(path) as dh:
        for i, entry in enumerate(dh):
            name = entry.name
            if name.startswith(&#34;.&#34;):
                continue
            if entry.is_file():
                os.remove(f&#34;{path}/{name}&#34;)
            elif entry.is_dir():
                subdirs.append(name)

    for subdir in subdirs:
        clearTree(f&#34;{path}/{subdir}&#34;)</code></pre>
</details>
</dd>
<dt id="control.files.dirAllFiles"><code class="name flex">
<span>def <span class="ident">dirAllFiles</span></span>(<span>path, ignore=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Gets all the files found by <code>path</code>.</p>
<p>The result is just <code>[path]</code> if <code>path</code> is a file, otherwise the list of files under
<code>path</code>, recursively.</p>
<p>The files are sorted alphabetically by path name.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>path</code></strong> :&ensp;<code>string</code></dt>
<dd>The path to the file or directory on the file system.</dd>
<dt><strong><code>ignore</code></strong> :&ensp;<code>set</code></dt>
<dd>Names of directories that must be skipped</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>tuple</code> of <code>string</code></dt>
<dd>The names of the files under <code>path</code>, starting with <code>path</code>, followed
by the bit relative to <code>path</code>.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L451-L493" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def dirAllFiles(path, ignore=None):
    &#34;&#34;&#34;Gets all the files found by `path`.

    The result is just `[path]` if `path` is a file, otherwise the list of files under
    `path`, recursively.

    The files are sorted alphabetically by path name.

    Parameters
    ----------
    path: string
        The path to the file or directory on the file system.
    ignore: set
        Names of directories that must be skipped

    Returns
    -------
    tuple of string
        The names of the files under `path`, starting with `path`, followed
        by the bit relative to `path`.
    &#34;&#34;&#34;
    if fileExists(path):
        return [path]

    if not dirExists(path):
        return []

    files = []

    if not ignore:
        ignore = set()

    for entry in os.listdir(path):
        name = f&#34;{path}/{entry}&#34;

        if os.path.isfile(name):
            files.append(name)
        elif os.path.isdir(name):
            if entry in ignore:
                continue
            files.extend(dirAllFiles(name, ignore=ignore))

    return tuple(sorted(files))</code></pre>
</details>
</dd>
<dt id="control.files.dirContents"><code class="name flex">
<span>def <span class="ident">dirContents</span></span>(<span>path, asSet=False)</span>
</code></dt>
<dd>
<div class="desc"><p>Gets the contents of a directory.</p>
<p>Only the direct entries in the directory (not recursively), and only real files
and folders.</p>
<p>The list of files and folders will be returned separately.
There is no attempt to sort the files.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>path</code></strong> :&ensp;<code>string</code></dt>
<dd>The path to the directory on the file system.</dd>
<dt><strong><code>asSet</code></strong> :&ensp;<code>boolean</code>, optional <code>False</code></dt>
<dd>If True, the files and directories will be delivered as sets, otherwise
as tuples.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>tuple</code> of <code>tuple</code></dt>
<dd>The files and the subdirectories.
These are given as names relative to the directory <code>path</code>,
so <code>path</code> is not prepended to these names.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L412-L448" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def dirContents(path, asSet=False):
    &#34;&#34;&#34;Gets the contents of a directory.

    Only the direct entries in the directory (not recursively), and only real files
    and folders.

    The list of files and folders will be returned separately.
    There is no attempt to sort the files.

    Parameters
    ----------
    path: string
        The path to the directory on the file system.
    asSet: boolean, optional False
        If True, the files and directories will be delivered as sets, otherwise
        as tuples.

    Returns
    -------
    tuple of tuple
        The files and the subdirectories.
        These are given as names relative to the directory `path`,
        so `path` is not prepended to these names.
    &#34;&#34;&#34;
    if not dirExists(path):
        return (set(), set()) if asSet else ((), ())

    files = []
    dirs = []

    for entry in os.listdir(path):
        if os.path.isfile(f&#34;{path}/{entry}&#34;):
            files.append(entry)
        elif os.path.isdir(f&#34;{path}/{entry}&#34;):
            dirs.append(entry)

    return (set(files), set(dirs)) if asSet else (tuple(files), tuple(dirs))</code></pre>
</details>
</dd>
<dt id="control.files.dirCopy"><code class="name flex">
<span>def <span class="ident">dirCopy</span></span>(<span>pathSrc, pathDst, noclobber=False)</span>
</code></dt>
<dd>
<div class="desc"><p>Copies a directory if it exists as directory.</p>
<p>Wipes the destination directory, if it exists.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L242-L255" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def dirCopy(pathSrc, pathDst, noclobber=False):
    &#34;&#34;&#34;Copies a directory if it exists as directory.

    Wipes the destination directory, if it exists.
    &#34;&#34;&#34;
    if dirExists(pathSrc):
        if dirExists(pathDst):
            if noclobber:
                return False
        dirRemove(pathDst)
        copytree(pathSrc, pathDst)
        return True
    else:
        return False</code></pre>
</details>
</dd>
<dt id="control.files.dirEmpty"><code class="name flex">
<span>def <span class="ident">dirEmpty</span></span>(<span>target)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L73-L75" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def dirEmpty(target):
    target = normpath(target)
    return not os.path.exists(target) or not os.listdir(target)</code></pre>
</details>
</dd>
<dt id="control.files.dirExists"><code class="name flex">
<span>def <span class="ident">dirExists</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"><p>Whether a path exists as directory on the file system.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L212-L222" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def dirExists(path):
    &#34;&#34;&#34;Whether a path exists as directory on the file system.&#34;&#34;&#34;
    return (
        False
        if path is None
        else True
        if path == &#34;&#34;
        else os.path.isdir(path)
        if path
        else True
    )</code></pre>
</details>
</dd>
<dt id="control.files.dirMake"><code class="name flex">
<span>def <span class="ident">dirMake</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"><p>Creates a directory if it does not already exist as directory.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L406-L409" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def dirMake(path):
    &#34;&#34;&#34;Creates a directory if it does not already exist as directory.&#34;&#34;&#34;
    if not dirExists(path):
        os.makedirs(path, exist_ok=True)</code></pre>
</details>
</dd>
<dt id="control.files.dirMove"><code class="name flex">
<span>def <span class="ident">dirMove</span></span>(<span>pathSrc, pathDst)</span>
</code></dt>
<dd>
<div class="desc"><p>Moves a directory if it exists as directory.</p>
<p>Refuses the operation in the target exists.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L231-L239" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def dirMove(pathSrc, pathDst):
    &#34;&#34;&#34;Moves a directory if it exists as directory.

    Refuses the operation in the target exists.
    &#34;&#34;&#34;
    if not dirExists(pathSrc) or dirExists(pathDst):
        return False
    os.rename(pathSrc, pathDst)
    return True</code></pre>
</details>
</dd>
<dt id="control.files.dirNm"><code class="name flex">
<span>def <span class="ident">dirNm</span></span>(<span>path, up=1)</span>
</code></dt>
<dd>
<div class="desc"><p>Get the directory part of a file name.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>up</code></strong> :&ensp;<code>int</code>, optional <code>1</code></dt>
<dd>The number of levels to go up. Should be 1 or higher.
If not passed, the parent directory is returned.
If it is 0 or lower, the <code>path</code> itself is returned.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L141-L151" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def dirNm(path, up=1):
    &#34;&#34;&#34;Get the directory part of a file name.

    Parameters
    ----------
    up: int, optional 1
        The number of levels to go up. Should be 1 or higher.
        If not passed, the parent directory is returned.
        If it is 0 or lower, the `path` itself is returned.
    &#34;&#34;&#34;
    return path if up &lt; 1 else os.path.dirname(dirNm(path, up - 1))</code></pre>
</details>
</dd>
<dt id="control.files.dirRemove"><code class="name flex">
<span>def <span class="ident">dirRemove</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"><p>Removes a directory if it exists as directory.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L225-L228" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def dirRemove(path):
    &#34;&#34;&#34;Removes a directory if it exists as directory.&#34;&#34;&#34;
    if dirExists(path):
        rmtree(path)</code></pre>
</details>
</dd>
<dt id="control.files.dirUpdate"><code class="name flex">
<span>def <span class="ident">dirUpdate</span></span>(<span>pathSrc, pathDst, force=False, delete=True, level=-1, conservative=False)</span>
</code></dt>
<dd>
<div class="desc"><p>Makes a destination dir equal to a source dir by copying newer files only.</p>
<p>Files of the source dir that are missing or older in the destination dir are
copied from the source to the destination.
Files and directories in the destination dir that do not exist in the source
dir are deleted, but this can be prevented.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>pathSrc</code></strong> :&ensp;<code>string</code></dt>
<dd>The source directory. It does not matter whether the directory ends with
a slash or not, unless the directory is the root.</dd>
<dt><strong><code>pathDst</code></strong> :&ensp;<code>string</code></dt>
<dd>The destination directory. It does not matter whether the directory ends with
a slash or not, unless the directory is the root.</dd>
<dt><strong><code>force</code></strong> :&ensp;<code>boolean</code>, optional <code>False</code></dt>
<dd>If True, files that are older in the source than in the destination will also
be copied.</dd>
<dt><strong><code>delete</code></strong> :&ensp;<code>boolean</code>, optional <code>False</code></dt>
<dd>Whether to delete items from the destination that do not exist in the source.</dd>
<dt><strong><code>level</code></strong> :&ensp;<code>integer</code>, optional <code>-1</code></dt>
<dd>
<p>Whether to merge recursively and to what level. At level 0 we do not merge,
but copy each item from source to destination.</p>
<p>If we start with a negative level, we never reach level 0, so we apply merging
always.</p>
<p>If we start with level 0, we merge the files, but we copy the subdirectories.</p>
<p>If we start with a positive level, we merge that many levels deep, after which
we switch to copying.</p>
</dd>
<dt><strong><code>conservative</code></strong> :&ensp;<code>boolean</code>, optional <code>False</code></dt>
<dd>If we are at level 0 and in the situation that we should copy a directory,
we assume that if there is already a corresponding directory at the destination,
it has the right contents, so we do not do the copying.
For example, if we are copying versioned directories of software, we assume
that directories with the same version names are the same</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>tuple</code></dt>
<dd>
<ul>
<li>boolean: whether the action was successful;</li>
<li>integer: the amount of copy actions to destination directory</li>
<li>integer: the amount of delete actions in the destination directory</li>
</ul>
</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L258-L403" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def dirUpdate(pathSrc, pathDst, force=False, delete=True, level=-1, conservative=False):
    &#34;&#34;&#34;Makes a destination dir equal to a source dir by copying newer files only.

    Files of the source dir that are missing or older in the destination dir are
    copied from the source to the destination.
    Files and directories in the destination dir that do not exist in the source
    dir are deleted, but this can be prevented.

    Parameters
    ----------
    pathSrc: string
        The source directory. It does not matter whether the directory ends with
        a slash or not, unless the directory is the root.
    pathDst: string
        The destination directory. It does not matter whether the directory ends with
        a slash or not, unless the directory is the root.
    force: boolean, optional False
        If True, files that are older in the source than in the destination will also
        be copied.
    delete: boolean, optional False
        Whether to delete items from the destination that do not exist in the source.
    level: integer, optional -1
        Whether to merge recursively and to what level. At level 0 we do not merge,
        but copy each item from source to destination.

        If we start with a negative level, we never reach level 0, so we apply merging
        always.

        If we start with level 0, we merge the files, but we copy the subdirectories.

        If we start with a positive level, we merge that many levels deep, after which
        we switch to copying.
    conservative: boolean, optional False
        If we are at level 0 and in the situation that we should copy a directory,
        we assume that if there is already a corresponding directory at the destination,
        it has the right contents, so we do not do the copying.
        For example, if we are copying versioned directories of software, we assume
        that directories with the same version names are the same

    Returns
    -------
    tuple
        *   boolean: whether the action was successful;
        *   integer: the amount of copy actions to destination directory
        *   integer: the amount of delete actions in the destination directory

    &#34;&#34;&#34;

    if not dirExists(pathSrc):
        return (False, 0, 0)

    srcPath = pathSrc.rstrip(&#34;/&#34;)
    dstPath = pathDst.rstrip(&#34;/&#34;)

    if not dirExists(pathDst):
        if fileExists(pathDst):
            if not delete:
                return (False, 0, 0)

            fileRemove(pathDst)

        return (dirCopy(pathSrc, pathDst), 1, 0)

    (good, cActions, dActions) = (True, 0, 0)
    (srcFiles, srcDrs) = dirContents(pathSrc, asSet=True)
    (dstFiles, dstDirs) = dirContents(pathDst, asSet=True)

    level -= 1

    for file in srcFiles:
        if file == DS_STORE:
            continue

        src = f&#34;{srcPath}/{file}&#34;
        dst = f&#34;{dstPath}/{file}&#34;

        if file in dstDirs:
            if delete:
                dirRemove(dst)
                dActions += 1
            else:
                good = False
                continue

        if file not in dstFiles or force or mTime(src) &gt; mTime(dst):
            fileCopy(src, dst)
            cActions += 1

    for file in dstFiles:
        dst = f&#34;{dstPath}/{file}&#34;

        if file == DS_STORE:
            fileRemove(dst)
            continue

        src = f&#34;{srcPath}/{file}&#34;

        if delete and file not in srcFiles:
            fileRemove(dst)
            dActions += 1

    # if level == 0:
    #   return (good, cActions, dActions)

    for dr in srcDrs:
        src = f&#34;{srcPath}/{dr}&#34;
        dst = f&#34;{dstPath}/{dr}&#34;

        if dr in dstFiles:
            if delete:
                fileRemove(dst)
                dActions += 1
            else:
                good = False
                continue

        if level == 0:
            if not (conservative and dirExists(dst)):
                dirCopy(src, dst)
                cActions += 1

            thisGood = True
        else:
            (thisGood, thisC, thisD) = dirUpdate(
                src,
                dst,
                force=force,
                delete=delete,
                level=level,
                conservative=conservative,
            )
            cActions += thisC
            dActions += thisD

        if not thisGood:
            good = False

    for dr in dstDirs:
        src = f&#34;{srcPath}/{dr}&#34;
        dst = f&#34;{dstPath}/{dr}&#34;

        if delete and dr not in srcDrs:
            dirRemove(dst)
            dActions += 1

    return (good, cActions, dActions)</code></pre>
</details>
</dd>
<dt id="control.files.expanduser"><code class="name flex">
<span>def <span class="ident">expanduser</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L54-L59" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def expanduser(path):
    nPath = normpath(path)
    if nPath.startswith(&#34;~&#34;):
        return f&#34;{_homeDir}{nPath[1:]}&#34;

    return nPath</code></pre>
</details>
</dd>
<dt id="control.files.extNm"><code class="name flex">
<span>def <span class="ident">extNm</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"><p>Get the extension part of a file name.</p>
<p>The dot is not included.
If there is no extension, the empty string is returned.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L641-L648" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def extNm(path):
    &#34;&#34;&#34;Get the extension part of a file name.

    The dot is not included.
    If there is no extension, the empty string is returned.
    &#34;&#34;&#34;
    parts = fileNm(path).rsplit(&#34;.&#34;, 1)
    return &#34;&#34; if len(parts) == 0 else parts[-1]</code></pre>
</details>
</dd>
<dt id="control.files.fileCopy"><code class="name flex">
<span>def <span class="ident">fileCopy</span></span>(<span>pathSrc, pathDst)</span>
</code></dt>
<dd>
<div class="desc"><p>Copies a file if it exists as file.</p>
<p>Wipes the destination file, if it exists.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L192-L199" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def fileCopy(pathSrc, pathDst):
    &#34;&#34;&#34;Copies a file if it exists as file.

    Wipes the destination file, if it exists.
    &#34;&#34;&#34;
    if fileExists(pathSrc):
        fileRemove(pathDst)
        copy(pathSrc, pathDst)</code></pre>
</details>
</dd>
<dt id="control.files.fileExists"><code class="name flex">
<span>def <span class="ident">fileExists</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"><p>Whether a path exists as file on the file system.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L181-L183" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def fileExists(path):
    &#34;&#34;&#34;Whether a path exists as file on the file system.&#34;&#34;&#34;
    return os.path.isfile(path)</code></pre>
</details>
</dd>
<dt id="control.files.fileMove"><code class="name flex">
<span>def <span class="ident">fileMove</span></span>(<span>pathSrc, pathDst)</span>
</code></dt>
<dd>
<div class="desc"><p>Moves a file if it exists as file.</p>
<p>Wipes the destination file, if it exists.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L202-L209" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def fileMove(pathSrc, pathDst):
    &#34;&#34;&#34;Moves a file if it exists as file.

    Wipes the destination file, if it exists.
    &#34;&#34;&#34;
    if fileExists(pathSrc):
        fileRemove(pathDst)
    os.rename(pathSrc, pathDst)</code></pre>
</details>
</dd>
<dt id="control.files.fileNm"><code class="name flex">
<span>def <span class="ident">fileNm</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"><p>Get the file part of a file name.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L154-L156" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def fileNm(path):
    &#34;&#34;&#34;Get the file part of a file name.&#34;&#34;&#34;
    return os.path.basename(path)</code></pre>
</details>
</dd>
<dt id="control.files.fileRemove"><code class="name flex">
<span>def <span class="ident">fileRemove</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"><p>Removes a file if it exists as file.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L186-L189" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def fileRemove(path):
    &#34;&#34;&#34;Removes a file if it exists as file.&#34;&#34;&#34;
    if fileExists(path):
        os.remove(path)</code></pre>
</details>
</dd>
<dt id="control.files.getCwd"><code class="name flex">
<span>def <span class="ident">getCwd</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Get current directory.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>string</code></dt>
<dd>The current directory.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L496-L504" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def getCwd():
    &#34;&#34;&#34;Get current directory.

    Returns
    -------
    string
        The current directory.
    &#34;&#34;&#34;
    return os.getcwd()</code></pre>
</details>
</dd>
<dt id="control.files.initTree"><code class="name flex">
<span>def <span class="ident">initTree</span></span>(<span>path, fresh=False, gentle=False)</span>
</code></dt>
<dd>
<div class="desc"><p>Make sure a directory exists, optionally clean it.</p>
<h2 id="parameters">Parameters</h2>
<p>path:
The directory in question. A leading <code>~</code> will be expanded to the user's
home directory.</p>
<pre><code>If the directory does not exist, it will be created.
</code></pre>
<dl>
<dt><strong><code>fresh</code></strong> :&ensp;<code>boolean</code>, optional <code>False</code></dt>
<dd>If True, existing contents will be removed, more or less gently.</dd>
<dt><strong><code>gentle</code></strong> :&ensp;<code>boolean</code>, optional <code>False</code></dt>
<dd>When existing content is removed, only files are recursively removed, not
subdirectories.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L109-L138" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def initTree(path, fresh=False, gentle=False):
    &#34;&#34;&#34;Make sure a directory exists, optionally clean it.

    Parameters
    ----------
    path:
        The directory in question. A leading `~` will be expanded to the user&#39;s
        home directory.

        If the directory does not exist, it will be created.

    fresh: boolean, optional False
        If True, existing contents will be removed, more or less gently.

    gentle: boolean, optional False
        When existing content is removed, only files are recursively removed, not
        subdirectories.
    &#34;&#34;&#34;

    path = expanduser(path)
    exists = os.path.exists(path)
    if fresh:
        if exists:
            if gentle:
                clearTree(path)
            else:
                rmtree(path)

    if not exists or fresh:
        os.makedirs(path, exist_ok=True)</code></pre>
</details>
</dd>
<dt id="control.files.isDir"><code class="name flex">
<span>def <span class="ident">isDir</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"><p>Whether path exists and is a directory.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L176-L178" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def isDir(path):
    &#34;&#34;&#34;Whether path exists and is a directory.&#34;&#34;&#34;
    return os.path.isdir(path)</code></pre>
</details>
</dd>
<dt id="control.files.isFile"><code class="name flex">
<span>def <span class="ident">isFile</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"><p>Whether path exists and is a file.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L171-L173" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def isFile(path):
    &#34;&#34;&#34;Whether path exists and is a file.&#34;&#34;&#34;
    return os.path.isfile(path)</code></pre>
</details>
</dd>
<dt id="control.files.list3d"><code class="name flex">
<span>def <span class="ident">list3d</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"><p>The list of all 3D files in a directory.</p>
<p>If the directory does not exist, the empty list is returned.</p>
<p>An image is a file with extension .gltf, .glb or any of its
case variants.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L736-L755" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def list3d(path):
    &#34;&#34;&#34;The list of all 3D files in a directory.

    If the directory does not exist, the empty list is returned.

    An image is a file with extension .gltf, .glb or any of its
    case variants.
    &#34;&#34;&#34;
    if not dirExists(path):
        return []

    files = []

    with os.scandir(path) as dh:
        for entry in dh:
            name = entry.name
            if THREED_RE.match(name) and entry.is_file():
                files.append(name)

    return files</code></pre>
</details>
</dd>
<dt id="control.files.listDirs"><code class="name flex">
<span>def <span class="ident">listDirs</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"><p>The list of all subdirectories in a directory.</p>
<p>If the directory does not exist, the empty list is returned.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L651-L667" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def listDirs(path):
    &#34;&#34;&#34;The list of all subdirectories in a directory.

    If the directory does not exist, the empty list is returned.
    &#34;&#34;&#34;
    if not dirExists(path):
        return []

    subdirs = []

    with os.scandir(path) as dh:
        for entry in dh:
            if entry.is_dir():
                name = entry.name
                subdirs.append(name)

    return subdirs</code></pre>
</details>
</dd>
<dt id="control.files.listFiles"><code class="name flex">
<span>def <span class="ident">listFiles</span></span>(<span>path, ext)</span>
</code></dt>
<dd>
<div class="desc"><p>The list of all files in a directory with a certain extension.</p>
<p>If the directory does not exist, the empty list is returned.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L670-L687" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def listFiles(path, ext):
    &#34;&#34;&#34;The list of all files in a directory with a certain extension.

    If the directory does not exist, the empty list is returned.
    &#34;&#34;&#34;
    if not dirExists(path):
        return []

    files = []

    nExt = len(ext)
    with os.scandir(path) as dh:
        for entry in dh:
            name = entry.name
            if name.endswith(ext) and entry.is_file():
                files.append(name[0:-nExt])

    return files</code></pre>
</details>
</dd>
<dt id="control.files.listFilesAccepted"><code class="name flex">
<span>def <span class="ident">listFilesAccepted</span></span>(<span>path, accept, withExt=True)</span>
</code></dt>
<dd>
<div class="desc"><p>The list of all files in a directory that match a certain accepted header.</p>
<p>If the directory does not exist, the empty list is returned.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L690-L711" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def listFilesAccepted(path, accept, withExt=True):
    &#34;&#34;&#34;The list of all files in a directory that match a certain accepted header.

    If the directory does not exist, the empty list is returned.
    &#34;&#34;&#34;
    if not dirExists(path):
        return []

    files = []

    exts = [ext.strip() for ext in accept.split(&#34;,&#34;)]

    with os.scandir(path) as dh:
        for entry in dh:
            name = entry.name
            for ext in exts:
                nExt = len(ext)
                if name.endswith(ext) and entry.is_file():
                    fileName = name if withExt else name[0:-nExt]
                    files.append(fileName)

    return files</code></pre>
</details>
</dd>
<dt id="control.files.listImages"><code class="name flex">
<span>def <span class="ident">listImages</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"><p>The list of all image files in a directory.</p>
<p>If the directory does not exist, the empty list is returned.</p>
<p>An image is a file with extension .png, .jpg, .jpeg or any of its
case variants.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L714-L733" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def listImages(path):
    &#34;&#34;&#34;The list of all image files in a directory.

    If the directory does not exist, the empty list is returned.

    An image is a file with extension .png, .jpg, .jpeg or any of its
    case variants.
    &#34;&#34;&#34;
    if not dirExists(path):
        return []

    files = []

    with os.scandir(path) as dh:
        for entry in dh:
            name = entry.name
            if IMAGE_RE.match(name) and entry.is_file():
                files.append(name)

    return files</code></pre>
</details>
</dd>
<dt id="control.files.normpath"><code class="name flex">
<span>def <span class="ident">normpath</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L33-L37" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def normpath(path):
    if path is None:
        return None
    norm = os.path.normpath(path)
    return &#34;/&#34;.join(norm.split(os.path.sep))</code></pre>
</details>
</dd>
<dt id="control.files.prefixSlash"><code class="name flex">
<span>def <span class="ident">prefixSlash</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"><p>Prefix a / before a path if it is non-empty and not already starts with it.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L68-L70" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def prefixSlash(path):
    &#34;&#34;&#34;Prefix a / before a path if it is non-empty and not already starts with it.&#34;&#34;&#34;
    return f&#34;/{path}&#34; if path and not path.startswith(&#34;/&#34;) else path</code></pre>
</details>
</dd>
<dt id="control.files.readJson"><code class="name flex">
<span>def <span class="ident">readJson</span></span>(<span>text=None, plain=False, asFile=None, preferTuples=False)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L544-L554" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def readJson(text=None, plain=False, asFile=None, preferTuples=False):
    if asFile is None:
        cfg = json.loads(text)
    else:
        if fileExists(asFile):
            with open(asFile, encoding=&#34;utf8&#34;) as fh:
                cfg = json.load(fh)
        else:
            cfg = {}

    return cfg if plain else deepAttrDict(cfg, preferTuples=preferTuples)</code></pre>
</details>
</dd>
<dt id="control.files.readPath"><code class="name flex">
<span>def <span class="ident">readPath</span></span>(<span>filePath)</span>
</code></dt>
<dd>
<div class="desc"><p>Reads the (textual) contents of a file.</p>
<div class="admonition note">
<p class="admonition-title">Not for binary files</p>
<p>The file will not be opened in binary mode.
Use this only for files with textual content.</p>
</div>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>filePath</code></strong> :&ensp;<code>string</code></dt>
<dd>The path of the file on the file system.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>string</code></dt>
<dd>The contents of the file as unicode.
If the file does not exist, the empty string is returned.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L518-L541" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def readPath(filePath):
    &#34;&#34;&#34;Reads the (textual) contents of a file.

    !!! note &#34;Not for binary files&#34;
        The file will not be opened in binary mode.
        Use this only for files with textual content.

    Parameters
    ----------
    filePath: string
        The path of the file on the file system.

    Returns
    -------
    string
        The contents of the file as unicode.
        If the file does not exist, the empty string is returned.
    &#34;&#34;&#34;

    if os.path.isfile(filePath):
        with open(filePath) as fh:
            text = fh.read()
        return text
    return &#34;&#34;</code></pre>
</details>
</dd>
<dt id="control.files.readYaml"><code class="name flex">
<span>def <span class="ident">readYaml</span></span>(<span>text=None, asFile=None, plain=False, preferTuples=True, defaultEmpty=True, ignore=False)</span>
</code></dt>
<dd>
<div class="desc"><p>Reads a yaml file.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>text</code></strong> :&ensp;<code>string</code>, optional <code>None</code></dt>
<dd>The input text, should be valid YAML, but see <code>ignore</code>.
If not given, the text is read from the file whose path is
given in <code>asFile</code></dd>
<dt><strong><code>asFile</code></strong> :&ensp;<code>string</code>, optional <code>None</code></dt>
<dd>The path of the file on the file system from which the YAML is read.
If not given, <code>text</code> is used. See also <code>ignore</code>.</dd>
<dt><strong><code>plain</code></strong> :&ensp;<code>boolean</code>, optional <code>False</code></dt>
<dd>If True, the result is (recursively) converted to an AttrDict</dd>
<dt><strong><code>preferTuples</code></strong> :&ensp;<code>optional True</code></dt>
<dd>When converting to an AttrDict, values of type lists are replaced by
tuples.
Has only effect if <code>plain</code> is False.</dd>
<dt><strong><code>defaultEmpty</code></strong> :&ensp;<code>boolean, False</code></dt>
<dd>If True, when the yaml text is None or the file named by <code>asFile</code> does
not exist, it returns an empty dict or AttrDict.
If False, <code>None</code> is returned in such cases.</dd>
<dt><strong><code>ignore</code></strong> :&ensp;<code>boolean, False</code></dt>
<dd>If the text is not valid YAML, do not raise an exception, but
return the text itself.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>AttrDict | void | string</code></dt>
<dd>The data content of the yaml file if it exists.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L565-L630" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def readYaml(
    text=None,
    asFile=None,
    plain=False,
    preferTuples=True,
    defaultEmpty=True,
    ignore=False,
):
    &#34;&#34;&#34;Reads a yaml file.

    Parameters
    ----------
    text: string, optional None
        The input text, should be valid YAML, but see `ignore`.
        If not given, the text is read from the file whose path is
        given in `asFile`
    asFile: string, optional None
        The path of the file on the file system from which the YAML is read.
        If not given, `text` is used. See also `ignore`.
    plain: boolean, optional False
        If True, the result is (recursively) converted to an AttrDict
    preferTuples: optional True
        When converting to an AttrDict, values of type lists are replaced by
        tuples.
        Has only effect if `plain` is False.
    defaultEmpty: boolean, False
        If True, when the yaml text is None or the file named by `asFile` does
        not exist, it returns an empty dict or AttrDict.
        If False, `None` is returned in such cases.
    ignore: boolean, False
        If the text is not valid YAML, do not raise an exception, but
        return the text itself.

    Returns
    -------
    AttrDict | void | string
        The data content of the yaml file if it exists.
    &#34;&#34;&#34;
    if asFile is None:
        yamlText = text
    else:
        if fileExists(asFile):
            with open(asFile, encoding=&#34;utf8&#34;) as fh:
                yamlText = fh.read()
        else:
            yamlText = None

    if yamlText is None:
        cfg = {} if defaultEmpty else None
    else:
        try:
            cfg = yaml.load(yamlText, Loader=yaml.FullLoader)
        except Exception as e:
            if ignore:
                cfg = text
            else:
                cfg = None
                raise e

    return (
        cfg
        if plain
        else None
        if cfg is None
        else deepAttrDict(cfg, preferTuples=preferTuples)
    )</code></pre>
</details>
</dd>
<dt id="control.files.splitPath"><code class="name flex">
<span>def <span class="ident">splitPath</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"><p>Split a file name in a directory part and a file part.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L166-L168" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def splitPath(path):
    &#34;&#34;&#34;Split a file name in a directory part and a file part.&#34;&#34;&#34;
    return os.path.split(path)</code></pre>
</details>
</dd>
<dt id="control.files.str_presenter"><code class="name flex">
<span>def <span class="ident">str_presenter</span></span>(<span>dumper, data)</span>
</code></dt>
<dd>
<div class="desc"><p>configures yaml for dumping multiline strings
Ref: <a href="https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data">https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data</a></p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L19-L26" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def str_presenter(dumper, data):
    &#34;&#34;&#34;configures yaml for dumping multiline strings
    Ref: https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data
    &#34;&#34;&#34;
    if data.count(&#34;\n&#34;) &gt; 0:  # check for multiline string
        return dumper.represent_scalar(&#34;tag:yaml.org,2002:str&#34;, data, style=&#34;|&#34;)

    return dumper.represent_scalar(&#34;tag:yaml.org,2002:str&#34;, data)</code></pre>
</details>
</dd>
<dt id="control.files.stripExt"><code class="name flex">
<span>def <span class="ident">stripExt</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"><p>Strip the extension of a file name, if there is one.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L159-L163" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def stripExt(path):
    &#34;&#34;&#34;Strip the extension of a file name, if there is one.&#34;&#34;&#34;
    (d, f) = (dirNm(path), fileNm(path))
    sep = &#34;/&#34; if d else &#34;&#34;
    return f&#34;{d}{sep}{f.rsplit(&#39;.&#39;, 1)[0]}&#34;</code></pre>
</details>
</dd>
<dt id="control.files.unexpanduser"><code class="name flex">
<span>def <span class="ident">unexpanduser</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L62-L65" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def unexpanduser(path):
    nPath = normpath(path)

    return nPath.replace(_homeDir, &#34;~&#34;)</code></pre>
</details>
</dd>
<dt id="control.files.writeJson"><code class="name flex">
<span>def <span class="ident">writeJson</span></span>(<span>data, asFile=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L557-L562" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def writeJson(data, asFile=None):
    if asFile is None:
        return json.dumps(data, ensure_ascii=False)

    with open(asFile, &#34;w&#34;, encoding=&#34;utf8&#34;) as fh:
        json.dump(data, fh, ensure_ascii=False)</code></pre>
</details>
</dd>
<dt id="control.files.writeYaml"><code class="name flex">
<span>def <span class="ident">writeYaml</span></span>(<span>data, asFile=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/CLARIAH/pure3dx/blob/4bb2a3c091b2869e30f26c6c28942718f16603ee/src/control/files.py#L633-L638" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def writeYaml(data, asFile=None):
    if asFile is None:
        return yaml.dump(data, allow_unicode=True)

    with open(asFile, &#34;w&#34;, encoding=&#34;utf8&#34;) as fh:
        yaml.dump(data, fh, allow_unicode=True, line_break=None)</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<p><a href="https://github.com/CLARIAH/pure3dx" title="GitHub repo">GitHub</a></p>
<p><a href="https://github.com/CLARIAH/pure3dx/blob/main/stats.md" title="GitHub repo">code stats</a></p>
<form>
<input id="lunr-search" name="q" placeholder="🔎 Search ..." aria-label="Search"
disabled minlength="2">
</form>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.css" integrity="sha512-j1u8eUJ4f23xPPxwOrLUPQaCD2dwzNqqmDDcWS4deWsMv2ohLqmXXuP3hU7g8TyzbMSakP/mMqoNBYWj8AEIFg==" crossorigin>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.js" integrity="sha512-plGUER9JkeEWPPqQBE4sdLqBoQug5Ap+BCGMc7bJ8BXkm+VVj6QzkpBz5Yv2yPkkq+cqg9IpkBaGCas6uDbW8g==" crossorigin></script>
<style>
.modal-dialog iframe {
width: 100vw;
height: calc(100vh - 80px);
}
@media screen and (min-width: 700px) {
.modal-dialog iframe {
width: 70vw;
height: 80vh;
}
}
.modal-dialog .tingle-modal-box {width: auto;}
.modal-dialog .tingle-modal-box__content {padding: 0;}
</style>
<script>
const input = document.getElementById('lunr-search');
input.disabled = false;
input.form.addEventListener('submit', (ev) => {
ev.preventDefault();
const url = new URL(window.location);
url.searchParams.set('q', input.value);
history.replaceState({}, null, url.toString());
search(input.value);
});
const query = new URL(window.location).searchParams.get('q');
if (query)
search(query);
function search(query) {
const url = '../doc-search.html#' + encodeURIComponent(query);
new tingle.modal({
cssClass: ['modal-dialog'],
onClose: () => {
const url = new URL(window.location);
url.searchParams.delete('q');
history.replaceState({}, null, url.toString());
setTimeout(() => input.focus(), 100);
}
}).setContent('<iframe src="' + url + '"></iframe>').open();
}
</script>
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="control" href="index.html">control</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="two-column">
<li><code><a title="control.files.abspath" href="#control.files.abspath">abspath</a></code></li>
<li><code><a title="control.files.chDir" href="#control.files.chDir">chDir</a></code></li>
<li><code><a title="control.files.clearTree" href="#control.files.clearTree">clearTree</a></code></li>
<li><code><a title="control.files.dirAllFiles" href="#control.files.dirAllFiles">dirAllFiles</a></code></li>
<li><code><a title="control.files.dirContents" href="#control.files.dirContents">dirContents</a></code></li>
<li><code><a title="control.files.dirCopy" href="#control.files.dirCopy">dirCopy</a></code></li>
<li><code><a title="control.files.dirEmpty" href="#control.files.dirEmpty">dirEmpty</a></code></li>
<li><code><a title="control.files.dirExists" href="#control.files.dirExists">dirExists</a></code></li>
<li><code><a title="control.files.dirMake" href="#control.files.dirMake">dirMake</a></code></li>
<li><code><a title="control.files.dirMove" href="#control.files.dirMove">dirMove</a></code></li>
<li><code><a title="control.files.dirNm" href="#control.files.dirNm">dirNm</a></code></li>
<li><code><a title="control.files.dirRemove" href="#control.files.dirRemove">dirRemove</a></code></li>
<li><code><a title="control.files.dirUpdate" href="#control.files.dirUpdate">dirUpdate</a></code></li>
<li><code><a title="control.files.expanduser" href="#control.files.expanduser">expanduser</a></code></li>
<li><code><a title="control.files.extNm" href="#control.files.extNm">extNm</a></code></li>
<li><code><a title="control.files.fileCopy" href="#control.files.fileCopy">fileCopy</a></code></li>
<li><code><a title="control.files.fileExists" href="#control.files.fileExists">fileExists</a></code></li>
<li><code><a title="control.files.fileMove" href="#control.files.fileMove">fileMove</a></code></li>
<li><code><a title="control.files.fileNm" href="#control.files.fileNm">fileNm</a></code></li>
<li><code><a title="control.files.fileRemove" href="#control.files.fileRemove">fileRemove</a></code></li>
<li><code><a title="control.files.getCwd" href="#control.files.getCwd">getCwd</a></code></li>
<li><code><a title="control.files.initTree" href="#control.files.initTree">initTree</a></code></li>
<li><code><a title="control.files.isDir" href="#control.files.isDir">isDir</a></code></li>
<li><code><a title="control.files.isFile" href="#control.files.isFile">isFile</a></code></li>
<li><code><a title="control.files.list3d" href="#control.files.list3d">list3d</a></code></li>
<li><code><a title="control.files.listDirs" href="#control.files.listDirs">listDirs</a></code></li>
<li><code><a title="control.files.listFiles" href="#control.files.listFiles">listFiles</a></code></li>
<li><code><a title="control.files.listFilesAccepted" href="#control.files.listFilesAccepted">listFilesAccepted</a></code></li>
<li><code><a title="control.files.listImages" href="#control.files.listImages">listImages</a></code></li>
<li><code><a title="control.files.normpath" href="#control.files.normpath">normpath</a></code></li>
<li><code><a title="control.files.prefixSlash" href="#control.files.prefixSlash">prefixSlash</a></code></li>
<li><code><a title="control.files.readJson" href="#control.files.readJson">readJson</a></code></li>
<li><code><a title="control.files.readPath" href="#control.files.readPath">readPath</a></code></li>
<li><code><a title="control.files.readYaml" href="#control.files.readYaml">readYaml</a></code></li>
<li><code><a title="control.files.splitPath" href="#control.files.splitPath">splitPath</a></code></li>
<li><code><a title="control.files.str_presenter" href="#control.files.str_presenter">str_presenter</a></code></li>
<li><code><a title="control.files.stripExt" href="#control.files.stripExt">stripExt</a></code></li>
<li><code><a title="control.files.unexpanduser" href="#control.files.unexpanduser">unexpanduser</a></code></li>
<li><code><a title="control.files.writeJson" href="#control.files.writeJson">writeJson</a></code></li>
<li><code><a title="control.files.writeYaml" href="#control.files.writeYaml">writeYaml</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<a href="https://pure.knaw.nl/portal/en/persons/dirk-roorda">Dirk Roorda</a>
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>